@model WCN_MVC.Models.WCNModel

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_LayoutPage.cshtml";
    if (Session["UserID"] == null)
    {
        Response.Redirect("~/Login/Index");
    }

    List<SelectListItem> WCNStatus = new List<SelectListItem>();
    WCNStatus.Add(new SelectListItem
    {
        Text = "New",
        Value = "New"
    });
    WCNStatus.Add(new SelectListItem
    {
        Text = "Created",
        Value = "Created"
    });
    WCNStatus.Add(new SelectListItem
    {
        Text = "Approved",
        Value = "Approved"
    });
    WCNStatus.Add(new SelectListItem
    {
        Text = "Completed",
        Value = "Completed"
    });
}

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round|Open+Sans">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<script src="~/Scripts/bootstrap.min.js"></script>
<script src="~/Scripts/bootstrap.js"></script>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery.validate.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<script src="~/Scripts/jquery-1.9.1.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<style type="text/css">
    body {
        color: #404E67;
        background: #F5F7FA;
        font-family: 'Open Sans', sans-serif;
    }

    .table-wrapper {
        width: 100%;
        margin: 30px auto;
        background: #fff;
        padding: 20px;
        box-shadow: 0 1px 1px rgba(0,0,0,.05);
    }

    .table-title {
        padding-bottom: 10px;
        margin: 0 0 10px;
    }

        .table-title h2 {
            margin: 6px 0 0;
            font-size: 22px;
        }

        .table-title .add-new {
            float: right;
            height: 30px;
            font-weight: bold;
            font-size: 12px;
            text-shadow: none;
            min-width: 100px;
            border-radius: 50px;
            line-height: 13px;
        }

            .table-title .add-new i {
                margin-right: 4px;
            }

    table.table {
        table-layout: fixed;
    }

        table.table tr th, table.table tr td {
            border-color: #e9e9e9;
        }

        table.table th i {
            font-size: 13px;
            margin: 0 5px;
            cursor: pointer;
        }

        table.table th:last-child {
            width: 100px;
        }

        table.table td a {
            cursor: pointer;
            display: inline-block;
            margin: 0 5px;
            min-width: 24px;
        }

            table.table td a.add {
                color: #27C46B;
            }

            table.table td a.edit {
                color: #FFC107;
            }

            table.table td a.delete {
                color: #E34724;
            }

        table.table td i {
            font-size: 19px;
        }

        table.table td a.add i {
            font-size: 24px;
            margin-right: -1px;
            position: relative;
            top: 3px;
        }

        table.table .form-control {
            height: 32px;
            line-height: 32px;
            box-shadow: none;
            border-radius: 2px;
        }

            table.table .form-control.error {
                border-color: #f50000;
            }

        table.table td .add {
            display: none;
        }
</style>

<script type="text/javascript">

    $(document).ready(function () {
        debugger;
        $('[data-toggle="tooltip"]').tooltip();
        var actions = $("table td:last-child").html();

        // Append table with add row form on add new button click
        $(".add-new").click(function () {
            debugger;
            $(this).attr("disabled", "disabled");
            var index = $("table tbody tr:last-child").index();
            var row = '<tr>' +
                '<td><select class="form-control resource" id="selResourceType"><option value="" selected="true">Select</option>' +
                '<option class="form-control" value="Revenue">Revenue</option>' +
                '<option class="form-control" value="Twilight Charges">Twilight Charges</option>' +
                '<option class="form-control" value="ROP Charges">ROP Charges</option>' +
                '<option class="form-control" value="ROP Admin Charges">ROP Admin Charges</option>' +
                '<option class="form-control" value="Mobilisation">Mobilisation</option>' +
                '<option class="form-control" value="Demobilisation">Demobilisation</option>' +
                '<option class="form-control" value="Additional Load">Additional Load</option>' +
                '<option class="form-control" value="Additonal Asset">Additonal Asset</option>' +
                '<option class="form-control" value="Standby Charges">Standby Charges</option>' +
                '<option class="form-control" value="Other Charges">Other Charges</option>' +
                '</select></td>' +
                '<td><input type="text" class="form-control" name="Resource" id="txtResource"></td>' +
                '<td><input type="date" class="form-control" name="StartDate" id="txtStartDate"></td>' +
                '<td><input type="date" class="form-control" name="EndDate" id="txtEndDate" onblur="calculateDays();"></td>' +
                '<td><input type="text" class="form-control" name="Days" id="txtDays" value="0.0"></td>' +
                '<td><input type="text" class="form-control" name="Qty" id="txtQty" value="0.0"></td>' +
                '<td><select class="form-control" id="selUnit"><option value="" selected="true">Select</option>' +
                '<option value="Day">Day</option>' +
                '<option value="Hour">Hour</option>' +
                '<option value="Nos">Nos</option>' +
                '<option value="Lumpsum">Lumpsum</option>' +
                '</td>' +
                '<td><input type="text" class="form-control" name="Rate" id="txtRate" value="0.000" onblur="calculateRevenueWiseTotalAmount();"></td>' +
                '<td><input type="text" class="form-control" name="Total" id="txtTotalAmount" value="0.000" disabled="disabled"></td>' +
                '<td><a class="add" title="Add" data-toggle="tooltip"><i class="material-icons">&#xE03B;</i></a>' +
                 '<a class="edit" title="Edit" data-toggle="tooltip"><i class="material-icons">&#xE254;</i></a>' +
                 '<a class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a></td>'
            '<td>' + actions + '</td>' +
        '</tr>';
            $("table").append(row);
            $("table tbody tr").eq(index + 1).find(".add, .edit").toggle();
            $('[data-toggle="tooltip"]').tooltip();
        });


        // Add row on add button click
        $(document).on("click", ".add", function () {
            debugger;
            var empty = false;
            var input = $(this).parents("tr").find('input[type="text"],input[type="date"],select#selResourceType,select#selUnit');
            //var input = $("*");
            input.each(function () {
                if (!$(this).val()) {
                    $(this).addClass("error");
                    empty = true;
                } else {
                    $(this).removeClass("error");
                }
            });
            $(this).parents("tr").find(".error").first().focus();
            if (!empty) {
                input.each(function () {
                    $(this).parent("td").html($(this).val());
                });
                $(this).parents("tr").find(".add, .edit").toggle();
                $(".add-new").removeAttr("disabled");
            }
        });


        // Edit row on edit button click
        $(document).on("click", ".edit", function () {
            debugger;
            //$(this).parents("tr").find("td:not(:last-child)").each(function () {
            //    $(this).html('<input type="text" class="form-control" value="' + $(this).text() + '">');
            //});

            $(this).parents("tr").find(".add, .edit").toggle();
            $(".add-new").attr("disabled", "disabled");

            var currentRow = $(this).closest("tr");

            var resType = currentRow.find("td:eq(0)").text();
            var res = currentRow.find("td:eq(1)").text();
            var sDate = currentRow.find("td:eq(2)").text();
            var eDate = currentRow.find("td:eq(3)").text();
            var days = currentRow.find("td:eq(4)").text();
            var qty = currentRow.find("td:eq(5)").text();
            var unit = currentRow.find("td:eq(6)").text();
            var rate = currentRow.find("td:eq(7)").text();
            var total = currentRow.find("td:eq(8)").text();

            $(this).parents("tr").html(
                '<td><select class="form-control resource" id="selResourceType">' +
                    '<option value="">Select</option>' +
                    '<option class="form-control" value="Revenue">Revenue</option>' +
                '<option class="form-control" value="Twilight Charges">Twilight Charges</option>' +
                '<option class="form-control" value="ROP Charges">ROP Charges</option>' +
                '<option class="form-control" value="ROP Admin Charges">ROP Admin Charges</option>' +
                '<option class="form-control" value="Mobilisation">Mobilisation</option>' +
                '<option class="form-control" value="Demobilisation">Demobilisation</option>' +
                '<option class="form-control" value="Additional Load">Additional Load</option>' +
                '<option class="form-control" value="Additonal Asset">Additonal Asset</option>' +
                '<option class="form-control" value="Standby Charges">Standby Charges</option>' +
                '<option class="form-control" value="Other Charges">Other Charges</option>' +
	            '</select></td>' +
                '<td><input type="text" class="form-control" name="Resource" id="txtResource"></td>' +
                '<td><input type="date" class="form-control" name="StartDate" id="txtStartDate"></td>' +
                '<td><input type="date" class="form-control" name="EndDate" id="txtEndDate" onblur="calculateDays();"></td>' +
                '<td><input type="text" class="form-control" name="Days" id="txtDays" value="0.0"></td>' +
                '<td><input type="text" class="form-control" name="Qty" id="txtQty" value="0.0"></td>' +
                '<td><select class="form-control" id="selUnit"><option value="" selected="true">Select</option>' +
                '<option value="Day">Day</option>' +
                '<option value="Hour">Hour</option>' +
                '<option value="Nos">Nos</option>' +
                '<option value="Lumpsum">Lumpsum</option>' +
                '</td>' +
                '<td><input type="text" class="form-control" name="Rate" id="txtRate" value="0.000" onblur="calculateRevenueWiseTotalAmount();"></td>' +
                '<td><input type="text" class="form-control" name="Total" id="txtTotalAmount" value="0.000" disabled="disabled"></td>' +
                '<td>' +
                '<a class="edit" title="Edit" data-toggle="tooltip"><i class="material-icons">&#xE254;</i></a>' +
                '<a class="add" title="Add" data-toggle="tooltip"><i class="material-icons">&#xE03B;</i></a>' +
                 '<a class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a></td>'
                );

            $("#selResourceType").val(resType);
            $("#txtResource").val(res);
            $("#txtStartDate").val(sDate);
            $("#txtEndDate").val(eDate);
            $("#txtDays").val(days);
            $("#txtQty").val(qty);
            $("#selUnit").val(unit);
            $("#txtRate").val(rate);
            $("#txtTotalAmount").val(total);

        });



        // Delete row on delete button click
        $(document).on("click", ".delete", function () {
            //debugger;
            $(this).parents("tr").remove();
            $(".add-new").removeAttr("disabled");
            calculateRevenueWiseTotalAmountForDeletion();
        });
    });


    function calculateRevenueWiseTotalAmountForDeletion() {
        var TotalAmount = 0;
        var TotalRevenue = 0;
        var TotalBillable = 0;
        var Revenue = 0;
        var TwilightCharges = 0;
        var ROPCharges = 0;
        var ROPAdminCharges = 0;
        var Mobilisation = 0;
        var Demobilisation = 0;
        var StandbyCharges = 0;
        var AdditonalAsset = 0;
        var AdditionalLoad = 0;
        var OtherCharges = 0;

        debugger;
        var table = document.getElementById('tblLineItems');
        var rowLength = table.rows.length;

        $("#txtRevenue").val(0);
        $("#txtTwilightCharges").val(0);
        $("#txtROPCharges").val(0);
        $("#txtROPAdminCharges").val(0);
        $("#txtAdditionalLoad").val(0);
        $("#txtMobilisation").val(0);
        $("#txtDemobilisation").val(0);
        $("#txtOtherCharges").val(0);
        $("#txtStandbyCharges").val(0);
        $("#txtAdditonalAsset").val(0);
        $("#txtTotalRevenue").val(0);
        $("#txtTotalBillableAmount").val(0);

        for (var i = 0; i < rowLength; i += 1) {
            var row = table.rows[i];

            var resourceType = row.cells[0].innerText;
            var totalAmount = row.cells[8].innerText;

            if (resourceType != 'ResourceType') {

                if (resourceType == 'Revenue') {
                    $("#txtRevenue").val(parseFloat(totalAmount).toFixed(3));
                }
                else if (resourceType == 'Twilight Charges') {
                    $("#txtTwilightCharges").val(parseFloat(totalAmount).toFixed(3));
                }
                else if (resourceType == 'ROP Charges') {
                    $("#txtROPCharges").val(parseFloat(totalAmount).toFixed(3));
                }
                else if (resourceType == 'ROP Admin Charges') {
                    $("#txtROPAdminCharges").val(parseFloat(totalAmount).toFixed(3));
                }
                else if (resourceType == 'Additional Load') {
                    $("#txtAdditionalLoad").val(parseFloat(totalAmount).toFixed(3));
                }
                else if (resourceType == 'Mobilisation') {
                    $("#txtMobilisation").val(parseFloat(totalAmount).toFixed(3));
                }
                else if (resourceType == 'Demobilisation') {
                    $("#txtDemobilisation").val(parseFloat(totalAmount).toFixed(3));
                }
                else if (resourceType == 'Other Charges') {
                    $("#txtOtherCharges").val(parseFloat(totalAmount).toFixed(3));
                }
                else if (resourceType == 'Standby Charges') {
                    $("#txtStandbyCharges").val(parseFloat(totalAmount).toFixed(3));
                }
                else if (resourceType == 'Additonal Asset') {
                    $("#txtAdditonalAsset").val(parseFloat(totalAmount).toFixed(3));
                }

                Revenue = parseFloat($("#txtRevenue").val()).toFixed(3);
                if (Revenue == '' || Revenue == 'NaN') {
                    Revenue = 0;
                }
                else {
                    parseFloat(Revenue).toFixed(3)
                }

                TwilightCharges = $("#txtTwilightCharges").val();
                if (TwilightCharges == '' || TwilightCharges == 'NaN') {
                    TwilightCharges = 0;
                }
                else {
                    parseFloat(TwilightCharges).toFixed(3)
                }

                ROPCharges = $("#txtROPCharges").val();
                if (ROPCharges == '' || ROPCharges == 'NaN') {
                    ROPCharges = 0;
                }
                else {
                    parseFloat(ROPCharges).toFixed(3)
                }

                ROPAdminCharges = $("#txtROPAdminCharges").val();
                if (ROPAdminCharges == '' || ROPAdminCharges == 'NaN') {
                    ROPAdminCharges = 0;
                }
                else {
                    parseFloat(ROPAdminCharges).toFixed(3)
                }

                AdditionalLoad = $("#txtAdditionalLoad").val();
                if (AdditionalLoad == '' || AdditionalLoad == 'NaN') {
                    AdditionalLoad = 0;
                }
                else {
                    parseFloat(AdditionalLoad).toFixed(3)
                }

                Mobilisation = $("#txtMobilisation").val();
                if (Mobilisation == '' || Mobilisation == 'NaN') {
                    Mobilisation = 0;
                }
                else {
                    parseFloat(Mobilisation).toFixed(3)
                }

                Demobilisation = $("#txtDemobilisation").val();
                if (Demobilisation == '' || Demobilisation == 'NaN') {
                    Demobilisation = 0;
                }
                else {
                    parseFloat(Demobilisation).toFixed(3)
                }

                OtherCharges = $("#txtOtherCharges").val();
                if (OtherCharges == '' || OtherCharges == 'NaN') {
                    OtherCharges = 0;
                }
                else {
                    parseFloat(OtherCharges).toFixed(3)
                }

                StandbyCharges = $("#txtStandbyCharges").val();
                if (StandbyCharges == '' || StandbyCharges == 'NaN') {
                    StandbyCharges = 0;
                }
                else {
                    parseFloat(StandbyCharges).toFixed(3)
                }

                AdditonalAsset = $("#txtAdditonalAsset").val();
                if (AdditonalAsset == '' || AdditonalAsset == 'NaN') {
                    AdditonalAsset = 0;
                }
                else {
                    parseFloat(AdditonalAsset).toFixed(3)
                }


                TotalRevenue =
                    (parseFloat(Revenue)
                    + parseFloat(TwilightCharges)
                    + parseFloat(ROPCharges)
                    + parseFloat(ROPAdminCharges)
                    + parseFloat(AdditionalLoad)
                    + parseFloat(Mobilisation)
                    + parseFloat(Demobilisation)
                    + parseFloat(OtherCharges)
                    + parseFloat(StandbyCharges)
                    + parseFloat(AdditonalAsset)
                    ).toFixed(3);

                $("#txtTotalRevenue").val(TotalRevenue);

                $("#txtTotalBillableAmount").val(TotalRevenue);

            }

        }
    }


    function calculateDays() {
        var sdt = new Date($("#txtStartDate").val());
        var edt = new Date($("#txtEndDate").val());

        if ($("#txtStartDate").val() == '') {
            alert("Start date required.");
            $("#txtStartDate").focus();
        }
        else if ($("#txtEndDate").val() == '') {
            alert("End date required.");
            $("#txtEndDate").focus();
        }
        else if ($("#txtStartDate").val() > $("#txtEndDate").val()) {
            alert("Start date is greater than end date.");
            $("#txtEndDate").focus();
        }
        else {
            var millisecondsPerDay = 1000 * 60 * 60 * 24;
            var millisBetween = new Date(edt - sdt);
            var days = ((millisBetween / millisecondsPerDay) + 1).toFixed(1);
            $("#txtDays").val(days);
        }
    };


    function calculateRevenueWiseTotalAmount() {

        var TotalAmount = 0;
        var TotalRevenue = 0;
        var TotalBillable = 0;
        var Revenue = 0;
        var TwilightCharges = 0;
        var ROPCharges = 0;
        var ROPAdminCharges = 0;
        var Mobilisation = 0;
        var Demobilisation = 0;
        var StandbyCharges = 0;
        var AdditonalAsset = 0;
        var AdditionalLoad = 0;
        var OtherCharges = 0;

        var extRevenue = 0;
        var extTwilightCharges = 0;
        var extROPCharges = 0;
        var extROPAdminCharges = 0;
        var extMobilisation = 0;
        var extDemobilisation = 0;
        var extStandbyCharges = 0;
        var extAdditonalAsset = 0;
        var extAdditionalLoad = 0;
        var extOtherCharges = 0;

        var totRevenue = 0;
        var totTwilightCharges = 0;
        var totROPCharges = 0;
        var totROPAdminCharges = 0;
        var totMobilisation = 0;
        var totDemobilisation = 0;
        var totStandbyCharges = 0;
        var totAdditonalAsset = 0;
        var totAdditionalLoad = 0;
        var totOtherCharges = 0;

        var selectedUnit = $("#selUnit option:selected").text();
        var selectedRT = $("#selResourceType option:selected").text();

        if (selectedUnit == 'Lumpsum') {
            $("#txtTotalAmount").val($("#txtRate").val());
        }
        else {
            $("#txtTotalAmount").val($("#txtDays").val() * $("#txtQty").val() * $("#txtRate").val());
        }

        TotalAmount = $("#txtTotalAmount").val();

        debugger;
        if (selectedRT == 'Revenue') {

            if ($("#txtRevenue").val() == '' || $("#txtRevenue").val() == '0' || $("#txtRevenue").val() == '0.000' || $("#txtRevenue").val() == 'NaN') {
                extRevenue = 0;
            }
            else {
                extRevenue = parseFloat($("#txtRevenue").val()).toFixed(3);
            }

            Revenue = parseFloat(TotalAmount).toFixed(3);
            totRevenue = (parseFloat(extRevenue) + parseFloat(Revenue)).toFixed(3);
            $("#txtRevenue").val(totRevenue);

        }
        else {
            totRevenue = $("#txtRevenue").val();

            if (totRevenue == 'NaN') {
                totRevenue = 0;
            }
        }

        if (selectedRT == 'Twilight Charges') {

            if ($("#txtTwilightCharges").val() == '' || $("#txtTwilightCharges").val() == '0' || $("#txtTwilightCharges").val() == '0.000' || $("#txtTwilightCharges").val() == 'NaN') {
                extTwilightCharges = 0;
            }
            else {
                extTwilightCharges = parseFloat($("#txtTwilightCharges").val()).toFixed(3);
            }

            TwilightCharges = parseFloat(TotalAmount).toFixed(3);
            totTwilightCharges = (parseFloat(extTwilightCharges) + parseFloat(TwilightCharges)).toFixed(3);
            $("#txtTwilightCharges").val(totTwilightCharges);

        }
        else {
            totTwilightCharges = $("#txtTwilightCharges").val();

            if (totTwilightCharges == 'NaN') {
                totTwilightCharges = 0;
            }
        }

        if (selectedRT == 'ROP Charges') {

            if ($("#txtROPCharges").val() == '' || $("#txtROPCharges").val() == '0' || $("#txtROPCharges").val() == '0.000' || $("#txtROPCharges").val() == 'NaN') {
                extROPCharges = 0;
            }
            else {
                extROPCharges = parseFloat($("#txtROPCharges").val()).toFixed(3);
            }

            ROPCharges = parseFloat(TotalAmount).toFixed(3);
            totROPCharges = (parseFloat(extROPCharges) + parseFloat(ROPCharges)).toFixed(3);
            $("#txtROPCharges").val(totROPCharges);
        }
        else {
            totROPCharges = parseFloat($("#txtROPCharges").val());

            if (totROPCharges == 'NaN') {
                totROPCharges = 0;
            }
        }

        if (selectedRT == 'ROP Admin Charges') {

            if ($("#txtROPAdminCharges").val() == '' || $("#txtROPAdminCharges").val() == '0' || $("#txtROPAdminCharges").val() == '0.000' || $("#txtROPAdminCharges").val() == 'NaN') {
                extROPAdminCharges = 0;
            }
            else {
                extROPAdminCharges = parseFloat($("#txtROPAdminCharges").val()).toFixed(3);
            }

            ROPAdminCharges = parseFloat(TotalAmount).toFixed(3);
            totROPAdminCharges = (parseFloat(extROPAdminCharges) + parseFloat(ROPAdminCharges)).toFixed(3);
            $("#txtROPAdminCharges").val(totROPAdminCharges);
        }
        else {
            totROPAdminCharges = parseFloat($("#txtROPAdminCharges").val());

            if (totROPAdminCharges == 'NaN') {
                totROPAdminCharges = 0;
            }
        }

        if (selectedRT == 'Additional Load') {

            if ($("#txtAdditionalLoad").val() == '' || $("#txtAdditionalLoad").val() == '0' || $("#txtAdditionalLoad").val() == '0.000' || $("#txtAdditionalLoad").val() == 'NaN') {
                extAdditionalLoad = 0;
            }
            else {
                extAdditionalLoad = parseFloat($("#txtAdditionalLoad").val()).toFixed(3);
            }

            AdditionalLoad = parseFloat(TotalAmount).toFixed(3);
            totAdditionalLoad = (parseFloat(extAdditionalLoad) + parseFloat(AdditionalLoad)).toFixed(3);
            $("#txtROPAdminCharges").val(totAdditionalLoad);
        }
        else {
            totAdditionalLoad = parseFloat($("#txtROPAdminCharges").val());

            if (totAdditionalLoad == 'NaN') {
                totAdditionalLoad = 0;
            }
        }

        if (selectedRT == 'Mobilisation') {

            if ($("#txtMobilisation").val() == '' || $("#txtMobilisation").val() == '0' || $("#txtMobilisation").val() == '0.000' || $("#txtMobilisation").val() == 'NaN') {
                extMobilisation = 0;
            }
            else {
                extMobilisation = parseFloat($("#txtMobilisation").val()).toFixed(3);
            }

            Mobilisation = parseFloat(TotalAmount).toFixed(3);
            totMobilisation = (parseFloat(extMobilisation) + parseFloat(Mobilisation)).toFixed(3);
            $("#txtMobilisation").val(totMobilisation);
        }
        else {
            totMobilisation = parseFloat($("#txtMobilisation").val());

            if (totMobilisation == 'NaN') {
                totMobilisation = 0;
            }
        }

        if (selectedRT == 'Demobilisation') {

            if ($("#txtDemobilisation").val() == '' || $("#txtDemobilisation").val() == '0' || $("#txtDemobilisation").val() == '0.000' || $("#txtDemobilisation").val() == 'NaN') {
                extDemobilisation = 0;
            }
            else {
                extDemobilisation = parseFloat($("#txtDemobilisation").val()).toFixed(3);
            }

            Demobilisation = parseFloat(TotalAmount).toFixed(3);
            totDemobilisation = (parseFloat(extDemobilisation) + parseFloat(Demobilisation)).toFixed(3);
            $("#txtDemobilisation").val(totDemobilisation);
        }
        else {
            totDemobilisation = parseFloat($("#txtDemobilisation").val());

            if (totDemobilisation == 'NaN') {
                totDemobilisation = 0;
            }
        }

        if (selectedRT == 'Other Charges') {

            if ($("#txtOtherCharges").val() == '' || $("#txtOtherCharges").val() == '0' || $("#txtOtherCharges").val() == '0.000' || $("#txtOtherCharges").val() == 'NaN') {
                extOtherCharges = 0;
            }
            else {
                extOtherCharges = parseFloat($("#txtOtherCharges").val()).toFixed(3);
            }

            OtherCharges = parseFloat(TotalAmount).toFixed(3);
            totOtherCharges = (parseFloat(extOtherCharges) + parseFloat(OtherCharges)).toFixed(3);
            $("#txtOtherCharges").val(totOtherCharges);
        }
        else {
            totOtherCharges = parseFloat($("#txtOtherCharges").val());

            if (totOtherCharges == 'NaN') {
                totOtherCharges = 0;
            }
        }

        if (selectedRT == 'Standby Charges') {

            if ($("#txtStandbyCharges").val() == '' || $("#txtStandbyCharges").val() == '0' || $("#txtStandbyCharges").val() == '0.000' || $("#txtStandbyCharges").val() == 'NaN') {
                extStandbyCharges = 0;
            }
            else {
                extStandbyCharges = parseFloat($("#txtStandbyCharges").val()).toFixed(3);
            }

            StandbyCharges = parseFloat(TotalAmount).toFixed(3);
            totStandbyCharges = (parseFloat(extStandbyCharges) + parseFloat(StandbyCharges)).toFixed(3);
            $("#txtStandbyCharges").val(totStandbyCharges);
        }
        else {
            totStandbyCharges = parseFloat($("#txtStandbyCharges").val());

            if (totStandbyCharges == 'NaN') {
                totStandbyCharges = 0;
            }
        }

        if (selectedRT == 'Additonal Asset') {

            if ($("#txtAdditonalAsset").val() == '' || $("#txtAdditonalAsset").val() == '0' || $("#txtAdditonalAsset").val() == '0.000' || $("#txtAdditonalAsset").val() == 'NaN') {
                extAdditonalAsset = 0;
            }
            else {
                extAdditonalAsset = parseFloat($("#txtAdditonalAsset").val()).toFixed(3);
            }

            AdditonalAsset = parseFloat(TotalAmount).toFixed(3);
            totAdditonalAsset = (parseFloat(extAdditonalAsset) + parseFloat(AdditonalAsset)).toFixed(3);
            $("#txtAdditonalAsset").val(totAdditonalAsset);
        }
        else {
            totAdditonalAsset = parseFloat($("#txtAdditonalAsset").val());

            if (totAdditonalAsset == 'NaN') {
                totAdditonalAsset = 0;
            }
        }

        debugger;
        TotalRevenue =
            (parseFloat(totRevenue)
            + parseFloat(totTwilightCharges)
            + parseFloat(totROPCharges)
            + parseFloat(totROPAdminCharges)
            + parseFloat(totAdditionalLoad)
            + parseFloat(totMobilisation)
            + parseFloat(totDemobilisation)
            + parseFloat(totOtherCharges)
            + parseFloat(totStandbyCharges)
            + parseFloat(totAdditonalAsset)
            ).toFixed(3);

        $("#txtTotalRevenue").val(TotalRevenue);

        $("#txtTotalBillableAmount").val(TotalRevenue);
    };


    function ChangeYear() {
        var selectedMonth = $("#selMonth option:selected").text();
        var selectedYear = $("#selYear option:selected").text();
        selectedMonth = selectedMonth.substring(0, 3);
        if (selectedMonth != 'Select Month' && selectedYear != 'Select Year') {
            $("#periodLocal").val(selectedMonth + '-' + selectedYear);
        }
    }


    $("body").on("click", "#btnSave", function () {
        //Loop through the Table rows and build a JSON array.
        debugger;
        var tracker = {
            status: 'Created', //$("#txtStatus").val(),
            companyId: $("#selCompany option:selected").val(),
            wcnDate: $("#txtWcnDate").val(),
            startDate: $("#txtWcnStartDate").val(),
            completedDate: $("#txtCompletedDate").val(),
            periodId: $("#selPeriod option:selected").val(),
            divisionId: $("#selDivision option:selected").val(),
            customerId: $("#selCustomer option:selected").val(),
            locationId: $("#selLocation option:selected").val(),
            description: $("#txtDescription").val(),
            rigNo: $("#txtRigNo").val(),
            otherLocation: $("#txtOtherLocation").val(),
            isWcnSent: $("#isWcnSent").prop('checked'),
            isWcnSigned: $("#isWcnSigned").prop('checked'),
            isClientSigned: $("#isClientSigned").prop('checked'),
            TotalBillable: $("#txtTotalBillableAmount").val()
        };

        var lineitems = new Array();
        $("#tblLineItems TBODY TR").each(function () {
            var row = $(this);
            var lineitem = {};
            lineitem.ResourceType = row.find("TD").eq(0).html();
            lineitem.Resource = row.find("TD").eq(1).html();
            lineitem.StartDate = row.find("TD").eq(2).html();
            lineitem.EndDate = row.find("TD").eq(3).html();
            lineitem.Days = row.find("TD").eq(4).html();
            lineitem.Qty = row.find("TD").eq(5).html();
            lineitem.Unit = row.find("TD").eq(6).html();
            lineitem.Rate = row.find("TD").eq(7).html();
            lineitem.Total = row.find("TD").eq(8).html();
            lineitems.push(lineitem);
        });

        var data = JSON.stringify({
            'wcnLineItems': lineitems,
            'tracker': tracker
        });

        //Send the JSON array to Controller using AJAX.
        $.ajax({
            type: "POST",
            url: "/WCN/AddWCNTrackerDetails",
            data: data,
            //JSON.stringify(lineitems, model),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (r) {
                alert("WCN No. " + r);
            }
        });
    });

</script>

<div class="container" style="text-align:center">
    <h4 style="color:red">Tracker (Create)</h4>
</div>

@using (Html.BeginForm("Create", "WCN", FormMethod.Post))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">

        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

        <div class="row">
            <div class="col-lg-12">
                <section class="panel">
                    <header class="panel-heading" style="background-color:lightblue; color:white">
                        <b>Tracker</b>
                    </header>

                    <div class="panel-body">
                        <div class="form-group">
                            <div class="col-md-2">
                                @Html.LabelFor(model => model.WcnNo, htmlAttributes: new { })
                                @Html.EditorFor(model => model.WcnNo, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly", placeholder = "WCN No.", id = "txtWcnNo" } })
                                @Html.ValidationMessageFor(model => model.WcnNo, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.Status, htmlAttributes: new { })
                                @*@Html.EditorFor(model => model.Status, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly", placeholder = "Status", id = "txtStatus" } })*@
                                @Html.DropDownListFor(model => model.Status, WCNStatus, new { @class = "form-control", id = "selStatus", @disabled = "disabled" })
                                @Html.ValidationMessageFor(model => model.Status, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.CompanyName, htmlAttributes: new { })
                                @Html.DropDownListFor(model => model.CompanyId, Model.CompanyLists, "-- Select Company --", new { id = "selCompany", style = "width:170px;height:32px", htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.CompanyName, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.WCNDate, htmlAttributes: new { })
                                @Html.EditorFor(model => model.WCNDate, "{0:dd/MM/yyyy}", new { htmlAttributes = new { @class = "form-control", id = "txtWcnDate" } })
                                @Html.ValidationMessageFor(model => model.WCNDate, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.StartDate, htmlAttributes: new { })
                                @Html.EditorFor(model => model.StartDate, new { htmlAttributes = new { @class = "form-control", id = "txtWcnStartDate" } })
                                @Html.ValidationMessageFor(model => model.StartDate, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.CompletedDate, htmlAttributes: new { })
                                @Html.EditorFor(model => model.CompletedDate, new { htmlAttributes = new { @class = "form-control", id = "txtCompletedDate" } })
                                @*@Html.ValidationMessageFor(model => model.CompletedDate, "", new { @class = "text-danger" })*@
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-2">
                                @Html.LabelFor(model => model.Period, htmlAttributes: new { })
                                @*<a href="#PeriodModal" data-toggle="modal" data-dismiss="modal" class="pull-right" style="background-color:red;color:white">Add Period</a>*@
                                @Html.DropDownListFor(model => model.PeriodId, Model.PeriodLists, "-- Select Period --", new { id = "selPeriod", style = "width:170px;height:32px", htmlAttributes = new { @class = "form-control", autofocus = "autofocus" } })
                                @Html.ValidationMessageFor(model => model.Period, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.DivisionName, htmlAttributes: new { })
                                @*<a href="#DivisionModal" data-toggle="modal" data-dismiss="modal" class="pull-right" style="background-color:red;color:white">Add Division</a>*@
                                @Html.DropDownListFor(model => model.DivisionId, Model.DivisionLists, "-- Select Division --", new { id = "selDivision", style = "width:170px;height:32px", htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.DivisionName, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.CustomerName, htmlAttributes: new { })
                                @*<a href="#CustomerModal" data-toggle="modal" data-dismiss="modal" class="pull-right" style="background-color:red;color:white">Add Customer</a>*@
                                @Html.DropDownListFor(model => model.CustomerId, Model.CustomerLists, "-- Select Customer --", new { id = "selCustomer", style = "width:170px;height:32px", htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.CustomerName, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.LocationName, htmlAttributes: new { })
                                @*<a href="#LocationModal" data-toggle="modal" data-dismiss="modal" class="pull-right" style="background-color:red;color:white">Add Location</a>*@
                                @Html.DropDownListFor(model => model.LocationId, Model.LocationLists, "-- Select Location --", new { id = "selLocation", style = "width:170px;height:32px", htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.LocationName, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.OtherLocation, htmlAttributes: new { })
                                @Html.EditorFor(model => model.OtherLocation, new { htmlAttributes = new { @class = "form-control", placeholder = "Other Location", id = "txtOtherLocation" } })
                                @Html.ValidationMessageFor(model => model.OtherLocation, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.RigNo, htmlAttributes: new { })
                                @Html.EditorFor(model => model.RigNo, new { htmlAttributes = new { @class = "form-control", placeholder = "Rig No.", id = "txtRigNo" } })
                                @Html.ValidationMessageFor(model => model.RigNo, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-8">
                                @Html.LabelFor(model => model.Description, htmlAttributes: new { })
                                @Html.EditorFor(model => model.Description, new { htmlAttributes = new { @class = "form-control", placeholder = "Description", id = "txtDescription" } })
                                @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.IsDiscount, htmlAttributes: new { })
                                @Html.CheckBoxFor(model => model.IsDiscount, new { onclick = "return false", htmlAttributes = new { @class = "form-control", id = "isDiscount" } })
                                @Html.EditorFor(model => model.DiscountAmount, new { htmlAttributes = new { @class = "form-control", placeholder = "Discount Amount", @readonly = "readonly", id = "txtDiscount" } })
                                @Html.ValidationMessageFor(model => model.DiscountAmount, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.DiscountRemark, htmlAttributes: new { })
                                @Html.EditorFor(model => model.DiscountRemark, new { htmlAttributes = new { @class = "form-control", placeholder = "Discount Remark", @readonly = "readonly", id = "txtDiscountRemark" } })
                                @Html.ValidationMessageFor(model => model.DiscountRemark, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-2">
                                @Html.LabelFor(model => model.IsWCNSent, htmlAttributes: new { })
                                <div class="col-md-8">
                                    <div class="checkbox">
                                        @Html.EditorFor(model => model.IsWCNSent, new { htmlAttributes = new { id = "isWcnSent" } })
                                        @Html.ValidationMessageFor(model => model.IsWCNSent, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.IsWCNSigned, htmlAttributes: new { })
                                <div class="col-md-8">
                                    <div class="checkbox">
                                        @Html.EditorFor(model => model.IsWCNSigned, new { htmlAttributes = new { id = "isWcnSigned" } })
                                        @Html.ValidationMessageFor(model => model.IsWCNSigned, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2">
                                @Html.LabelFor(model => model.IsClientSigned, htmlAttributes: new { })
                                <div class="col-md-8">
                                    <div class="checkbox">
                                        @Html.EditorFor(model => model.IsClientSigned, new { htmlAttributes = new { id = "isClientSigned" } })
                                        @Html.ValidationMessageFor(model => model.IsClientSigned, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="panel">
                    <header class="panel-heading" style="background-color:lightblue; color:white">
                        <b>Line Items</b>
                    </header>
                    <div class="table-title">
                        <div class="row">
                            <div class="col-sm-8"><h2><b></b></h2></div>
                            <div class="col-sm-4">
                                <button type="button" class="btn btn-danger add-new"><i class="fa fa-plus"></i> Add New</button>
                            </div>
                        </div>
                        @*</div>*@
                        <table class="table table-bordered" id="tblLineItems">
                            <thead>
                                <tr style="width:100%; background-color:lightgreen;">
                                    <th style="width:15%; color:white">ResourceType</th>
                                    <th style="width:10%; color:white">Resource</th>
                                    <th style="width:15%; color:white">StartDate</th>
                                    <th style="width:15%;color:white">EndDate</th>
                                    <th style="width:5%;color:white">Days</th>
                                    <th style="width:7%;color:white">Qty</th>
                                    <th style="width:7%; color:white">Unit</th>
                                    <th style="width:8%; color:white">Rate</th>
                                    <th style="width:10%; color:white">Total</th>
                                    <th style="width:8%; color:white">Actions</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </section>

            </div>
        </div>

        @*<div class="form-group">
                <div class="container">
                    <div class="table-wrapper">
                        <div class="table-title">
                            <div class="row">
                                <div class="col-sm-8"><h2><b>Line Items</b></h2></div>
                                <div class="col-sm-4">
                                    <button type="button" class="btn btn-danger add-new"><i class="fa fa-plus"></i> Add New</button>
                                </div>
                            </div>
                        </div>
                        <table class="table table-bordered" id="tblLineItems">
                            <thead>
                                <tr style="width:100%; background-color:lightblue;">
                                    <th style="width:15%; color:white">ResourceType</th>
                                    <th style="width:10%; color:white">Resource</th>
                                    <th style="width:15%; color:white">StartDate</th>
                                    <th style="width:15%;color:white">EndDate</th>
                                    <th style="width:5%;color:white">Days</th>
                                    <th style="width:7%;color:white">Qty</th>
                                    <th style="width:7%; color:white">Unit</th>
                                    <th style="width:8%; color:white">Rate</th>
                                    <th style="width:10%; color:white">Total</th>
                                    <th style="width:8%; color:white">Actions</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>*@

        <div class="row">
            <div class="col-lg-12">
                <section class="panel">
                    <header class="panel-heading" style="background-color:lightblue; color:white">
                        <b>Revenue Summary (OMR)</b>
                    </header>
                    <div class="panel-body">
                        <div class="form-group">
                            <div class="col-md-2">
                                <label for="">
                                    Revenue
                                    <input type="text" class="form-control" id="txtRevenue" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>

                            <div class="col-md-2">
                                <label for="">
                                    Twilight Charges
                                    <input type="text" class="form-control" id="txtTwilightCharges" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>

                            <div class="col-md-2">
                                <label for="">
                                    ROP Charges
                                    <input type="text" class="form-control" id="txtROPCharges" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>

                            <div class="col-md-2">
                                <label for="">
                                    ROP Admin Charges
                                    <input type="text" class="form-control" id="txtROPAdminCharges" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>

                            <div class="col-md-2">
                                <label for="">
                                    Mobilisation
                                    <input type="text" class="form-control" id="txtMobilisation" placeholder="0" readonly="readonly" style="color:blue; font:bold">

                                </label>
                            </div>

                            <div class="col-md-2">
                                <label for="">
                                    Demobilisation
                                    <input type="text" class="form-control" id="txtDemobilisation" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>

                        </div>

                        <div class="form-group">
                            <div class="col-md-2">
                                <label for="">
                                    Other Charges
                                    <input type="text" class="form-control" id="txtOtherCharges" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>

                            <div class="col-md-2">
                                <label for="">
                                    Standby Charges
                                    <input type="text" class="form-control" id="txtStandbyCharges" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>

                            <div class="col-md-2">
                                <label for="">
                                    Additional Load
                                    <input type="text" class="form-control" id="txtAdditionalLoad" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>

                            <div class="col-md-2">
                                <label for="">
                                    Additonal Asset
                                    <input type="text" class="form-control" id="txtAdditonalAsset" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>

                            <div class="col-md-2">
                                <label for="">
                                    Discount Remark
                                    <input type="text" class="form-control" id="txtDiscountRemark" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-2">
                                <label for="">
                                    Total Revenue
                                    <input type="text" class="form-control" id="txtTotalRevenue" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>

                            <div class="col-md-2">
                                <label for="">
                                    Discount Amount
                                    <input type="text" class="form-control" id="txtDiscountAmount" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>

                            <div class="col-md-2">
                                <label for="">
                                    Additional Discount
                                    <input type="text" class="form-control" id="txtAdditionalDiscount" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>

                            <div class="col-md-2">
                                <label for="">
                                    Total Billable Amount
                                    <input type="text" class="form-control" id="txtTotalBillableAmount" placeholder="0" readonly="readonly" style="color:blue; font:bold">
                                </label>
                            </div>

                        </div>
                    </div>
                </section>
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-10">
                <label class="danger" style="color:red">@ViewBag.Message</label>
            </div>
        </div>

        <div class="row-cols pull-right">
            <div class="col-lg-12">
                <input type="submit" value="Save" id="btnSave" class="btn btn-info" style="width:150px;height:50px" />
                @Html.ActionLink("Back", "Index", "WCN", routeValues: null, htmlAttributes: new { @class = "btn btn-info", @role = "button", style = "width:150px;height:50px" })
            </div>
        </div>

    </div>
}

@using (Html.BeginForm("AddDivision", "WCN", FormMethod.Post))
{
    <div id="DivisionModal" class="modal fade">
        <div class="modal-dialog modal-sm pull-left">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Division</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            @Html.EditorFor(model => model.DivisionCode, new { htmlAttributes = new { @class = "form-control", placeholder = "Division Code" } })
                            @Html.ValidationMessageFor(model => model.DivisionCode, "", new { @class = "text-danger" })
                        </div>
                        <div class="form-group">
                            @Html.EditorFor(model => model.DivisionName, new { htmlAttributes = new { @class = "form-control", placeholder = "Division Name" } })
                            @Html.ValidationMessageFor(model => model.DivisionName, "", new { @class = "text-danger" })
                        </div>
                    </form>

                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" type="submit" name="submit" value="Save">Save</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
}


@using (Html.BeginForm("AddLocation", "WCN", FormMethod.Post))
{
    <div id="LocationModal" class="modal fade">
        <div class="modal-dialog modal-sm pull-left">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Location</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            @Html.EditorFor(model => model.LocationName, new { htmlAttributes = new { @class = "form-control", placeholder = "Location Name" } })
                            @Html.ValidationMessageFor(model => model.LocationName, "", new { @class = "text-danger" })
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" type="submit" name="submit" value="Save">Save</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
}


@using (Html.BeginForm("AddCustomer", "WCN", FormMethod.Post))
{
    <div id="CustomerModal" class="modal fade">
        <div class="modal-dialog modal-sm pull-left">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Customer</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            @Html.EditorFor(model => model.CustomerName, new { htmlAttributes = new { @class = "form-control", placeholder = "Customer Name" } })
                            @Html.ValidationMessageFor(model => model.CustomerName, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group">
                            @Html.EditorFor(model => model.ContactNo, new { htmlAttributes = new { @class = "form-control", placeholder = "Contact No." } })
                            @Html.ValidationMessageFor(model => model.ContactNo, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group">
                            @Html.EditorFor(model => model.ContactPerson, new { htmlAttributes = new { @class = "form-control", placeholder = "Contact Person" } })
                            @Html.ValidationMessageFor(model => model.ContactPerson, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group">
                            @Html.EditorFor(model => model.Address, new { htmlAttributes = new { @class = "form-control", placeholder = "Address" } })
                            @Html.ValidationMessageFor(model => model.Address, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group">
                            @Html.EditorFor(model => model.Emailid, new { htmlAttributes = new { @class = "form-control", placeholder = "Email ID" } })
                            @Html.ValidationMessageFor(model => model.Emailid, "", new { @class = "text-danger" })
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" type="submit" name="submit" value="Save">Save</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
}


@using (Html.BeginForm("AddPeriod", "WCN", FormMethod.Post))
{
    <div id="PeriodModal" class="modal fade">
        <div class="modal-dialog modal-sm pull-left">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Period</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            @Html.DropDownListFor(model => model.Month, new List<SelectListItem>
                            {new SelectListItem { Text = "Select Month", Value = "0", Selected=true},
                            new SelectListItem { Text = "January", Value = "1"},
                            new SelectListItem { Text = "February", Value = "2"},
                            new SelectListItem { Text = "March", Value = "3"},
                            new SelectListItem { Text = "April", Value = "4"},
                            new SelectListItem { Text = "May", Value = "5"},
                            new SelectListItem { Text = "June", Value = "6"},
                            new SelectListItem { Text = "July", Value = "7"},
                            new SelectListItem { Text = "August", Value = "8"},
                            new SelectListItem { Text = "September", Value = "9"},
                            new SelectListItem { Text = "October", Value = "10"},
                            new SelectListItem { Text = "November", Value = "11"},
                            new SelectListItem { Text = "December", Value = "12"}},
                            new { id = "selMonth", style = "width:250px;height:32px", @onChange = "return ChangeYear()" })
                            @Html.ValidationMessageFor(model => model.Month, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group">
                            @Html.DropDownListFor(model => model.Year, Model.YearLists, "Select Year", new { @id = "selYear", style = "width:250px;height:32px", @onChange = "return ChangeYear()", htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Year, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group">
                            @Html.EditorFor(model => model.Period, new { htmlAttributes = new { @id = "periodLocal", @class = "form-control", placeholder = "Period", @readonly = "readonly" } })
                            @Html.ValidationMessageFor(model => model.Period, "", new { @class = "text-danger" })
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" type="submit" name="submit1" value="Save">Save</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
}

